# LabSeq API

API for calculating the **LabSeq sequence** with in-memory caching, implemented in Quarkus.

---

## 1️⃣ Source Code (Summary)

The project contains the main files: DTO (`LabseqResponsetDTO.java`), Services (`LabseqService.java`, `CacheService.java`), Resource/Controller (`BackLabseq.java`), Maven POM (`pom.xml`) and Dockerfile for build and execution in a container.

---

## 2️⃣ REST API Documentation – OpenAPI (Swagger)

The documentation is automatically generated by Quarkus + SmallRye OpenAPI.

Available endpoints:

- GET `/labseq/{n}`: Calculates the LabSeq sequence for `n`.
- GET `/labseq/clean-cache`: Clears the cached sequence.

Swagger UI: http://localhost:8080/swagger-ui  

Example JSON response from endpoint `/labseq/10`:

{
"transactionTime": 3,
"error": "",
"result": "12"
}

---

## 3️⃣ Execution Instructions

### Via Docker (recommended)

Full Dockerfile:

# Stage 1: Build the application
FROM maven:3.9.6-eclipse-temurin-21 AS build
WORKDIR /app
COPY . .
RUN mvn clean package -DskipTests

# Stage 2: Runtime image
FROM eclipse-temurin:21-jre
WORKDIR /app
COPY --from=build /app/target/quarkus-app/ ./
EXPOSE 8080
CMD ["java", "-jar", "quarkus-run.jar"]

To build the Docker image:

docker build -t labseq-app .

To run the container:

docker run -i --rm -p 8080:8080 labseq-app

- The API will be available at http://localhost:8080/labseq/{n} and http://localhost:8080/labseq/clean-cache
- Swagger UI: http://localhost:8080/swagger-ui
- OpenAPI JSON: http://localhost:8080/openapi

### Local Execution (development)

Run without Docker:

./mvnw quarkus:dev

- Hot reload enabled (changes reflected immediately)
- Endpoints and Swagger at the same URLs above

---

## 4️⃣ Notes

- `transactionTime` indicates execution time in milliseconds.
- For large calculations, it may return partially with `error` indicating a timeout.
- DTO used for all JSON responses: `LabseqResponsetDTO`

---

## 5️⃣ Usage Examples

GET /labseq/10:

{
"transactionTime": 2,
"error": "",
"result": "12"
}

GET /labseq/clean-cache:

{
"transactionTime": 1,
"error": "",
"result": ""
}
